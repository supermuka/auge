<div class="container-list">
    <material-fab raised (trigger)="selectInitiative(null);viewDetail(true)">
        <material-icon icon="add"></material-icon>
    </material-fab>
    <br/>
    <!-- filter called by search component -->
    <div *ngIf="visibleFilter == true">
        <auge-initiatives-filter [initiativesFilterParam]="initiativesFilterParam" (close)="visibleFilter = false"></auge-initiatives-filter>
    </div>
    <material-expansionpanel-set>
        <div *ngFor="let iInitiative of initiatives;let i = index">
            <h4 *ngIf="i == 0 || initiatives[i-1]?.group?.id != initiatives[i]?.group?.id">
                <span class="avatar avatar-border" [style.background-color]="colorFromUuid(iInitiative?.group?.id)" [materialTooltip]="groupLabel">
                    <span class="text-group-letter">{{firstLetter(iInitiative?.group?.name)}}</span>
                </span>
                <span>{{iInitiative?.group?.name}}</span>
            </h4>
            <material-expansionpanel
                    class="expansionpanel-wide-{{wideControl[iInitiative]}}"
                    [alwaysHideExpandIcon]="true"
                    [hideExpandedHeader]="false"
                    [showSaveCancel]="false"
                    (expandedChange)="expandedChange(iInitiative, $event)">
                <div name class="custom-expansionpanel-panel-specific-name-width">
                    <span class="truncate-ellipsed-parent">
                        <span class="truncate-ellipsed"><strong>{{iInitiative.name}}</strong></span>
                        <!-- div class="truncate-ellipsed">{{iInitiative.description}}</div -->
                    </span>
                    <span class="w3-right">
                        <span class="avatar" [style.background-image]="'url(' +  userUrlImage(iInitiative?.leader?.userProfile?.image) + ')'" [materialTooltip]="leaderLabel + ' ' + iInitiative?.leader?.name"></span>
                    </span>
                </div>
                <div value>
                    <auge-initiative-summary [initiative]="iInitiative"></auge-initiative-summary>
                </div>
                <div action>
                    <material-toggle [disabled]="expandedControl[iInitiative] != null && !expandedControl[iInitiative]" [(checked)]="wideControl[iInitiative]"></material-toggle>
                    <material-menu [menu]="menuModel" (click)="selectInitiative(iInitiative)">
                    </material-menu>
                </div>
                <div>
                    <hr>
                    <span><strong>{{objectiveLabel}}:</strong> {{iInitiative?.objective?.name}}</span>
                    <auge-work-items [initiative]="iInitiative"></auge-work-items>
                </div>
            </material-expansionpanel>
        </div>
    </material-expansionpanel-set>
    <auge-initiative-detail *ngIf="detailVisible == true" [selectedInitiativeId]="selectedInitiative.id" (save)="changeListItem($event)" (close)="viewDetail(false)">
    </auge-initiative-detail>
</div>