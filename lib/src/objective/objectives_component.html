<div class="container-list">
    <material-fab raised (trigger)="selectObjective(null);viewDetail(true)">
        <material-icon icon="add"></material-icon>
    </material-fab>
    <br/>
    <material-expansionpanel-set>
        <div #refMatExp *ngFor="let iObjective of objectives;let i = index" >
            <h4 *ngIf="i == 0 || objectives[i-1]?.group?.id != objectives[i]?.group?.id">
                <div>
                    <span class="avatar avatar-border" [style.background-color]="colorFromUuid(iObjective?.group?.id)" [materialTooltip]="groupLabel">
                        <span class="text-group-letter">{{firstLetter(iObjective?.group?.name)}}</span>
                    </span>
                    <span>{{iObjective?.group?.name}}</span>
                </div>
            </h4>
            <material-expansionpanel [alwaysHideExpandIcon]="true"
                    [hideExpandedHeader]="false"
                    [showSaveCancel]="false"
                    [expanded]="expandedControl[iObjective]"
                    (expandedChange)="scrollInit($event, refMatExp);expandedControl[iObjective] = $event">

                <!-- (expandedChange)="expandedControl[iObjective] = $event" -->
                <div name class="custom-material-expansionpanel-name">
                    <span class="c100 p{{iObjective.progress}} small">
                        <span>{{iObjective.progress}}%</span>
                        <div class="slice">
                            <div class="bar"></div>
                            <div class="fill"></div>
                        </div>
                    </span>
                    <span class="truncate-ellipsed-parent">
                        <h4 class="truncate-ellipsed">{{iObjective.name}}</h4>
                        <div>{{iObjective.startDate | date}}<span>&nbsp;Â·&nbsp;</span>{{iObjective.endDate | date}}</div>
                    </span>
                </div>
                <div *ngIf="iObjective.leader != null" value class="right" >
                    <span class="avatar" [style.background-image]="'url(' +  userUrlImage(iObjective.leader?.userProfile.image) + ')'" [materialTooltip]="leaderLabel + ' ' + iObjective.leader.name"></span>
                </div>
                <div action>
                    <material-menu [menu]="menuModel" (click)="selectObjective(iObjective)">
                    </material-menu>
                </div>
                <hr>
                <span><strong>{{alignedToLabel}}</strong> {{iObjective?.alignedTo?.name}}</span>
                <div class="w3-row" >
                    <div class="w3-col m9">
                        <auge-measures [objective]="iObjective"></auge-measures>
                        <auge-initiatives-summary [objectiveId]="iObjective.id"></auge-initiatives-summary>
                    </div>
                    <div class="w3-col m3">
                        <auge-objective-timeline [objective]="iObjective"></auge-objective-timeline>
                    </div>
                </div>
            </material-expansionpanel>
        </div>
    </material-expansionpanel-set>
    <auge-objective-detail *ngIf="detailVisible == true" [selectedObjective]="selectedObjective" (save)="changeListItem($event)" (close)="viewDetail(false)">
    </auge-objective-detail>
</div>