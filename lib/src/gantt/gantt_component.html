<div class="wrapper">
    <div class="gantt" elevation="2">
        <div  class="sticky">
            <div class="gantt__row gantt__row--years">
                <div class="gantt__row-first"></div>
                <div *ngFor="let iYear of yearsInterval">
                    <span>{{iYear}}</span>
                </div>
            </div>
            <div class="gantt__row gantt__row--months">
                <div><span>{{groupLabel}}</span></div>
                <div *ngFor="let iYearMonth of yearsMonthsInterval">
                    <span>{{iYearMonth.monthName}}</span>
                </div>
            </div>
        </div>
        <div class="gantt__row gantt__row--lines">
            <span></span>
            <span class="marker-{{iYearMonth.isCurrent}}" *ngFor="let iYearMonth of yearsMonthsInterval"></span>
        </div>
        <div class="gantt__row" *ngFor="let iObjectivesGroupKey of objectivesByGroup?.keys">
            <div class="gantt__row-first">
                <span class="avatar avatar-border" [style.background-color]="colorFromUuid(objectivesByGroup[iObjectivesGroupKey].first.group.id)">
                    <span class="text-group-letter">{{firstLetter(objectivesByGroup[iObjectivesGroupKey].first.group.name)}}</span>
                </span>
                <span class="truncate-ellipsed-parent">
                    <span class="truncate-ellipsed">{{objectivesByGroup[iObjectivesGroupKey].first.group.name}}</span>
                </span>
            </div>
            <ul class="gantt__row-bars" >
               <li *ngFor="let iObjective of objectivesByGroup[iObjectivesGroupKey]" [style.grid-column]="gridColumnFromStartAndEndDate(iObjective)" [style.background-color]="barColor(iObjective)" (click)="goToObjectives(iObjective)">
                   <span class="c100 p{{iObjective.progress}} tiny">
                        <span>{{iObjective.progress}}%</span>
                        <div class="slice">
                            <div class="bar"></div>
                            <div class="fill"></div>
                        </div>
                   </span>
                   <span clickableTooltipTarget
                         keyboardOnlyFocusIndicator
                         tabindex="0"
                         size="medium"
                         #clickableRef="tooltipTarget">{{iObjective.name}}</span>
                   <material-tooltip-card [for]="clickableRef" [preferredPositions]="preferredTooltipPositions">
                       <div>Start Date</div>
                       <div><strong>{{iObjective.startDate | date}}</strong></div>
                       <div>End Date</div>
                       <div><strong>{{iObjective.endDate | date}}</strong></div>
                       <div>Leader</div>
                       <div class="avatar" [style.background-image]="'url(' +  userUrlImage(iObjective?.leader) + ')'"></div><span> <strong>{{iObjective?.leader.name}}</strong></span>
                   </material-tooltip-card>
               </li>
            </ul>
        </div>
    </div>
</div>
