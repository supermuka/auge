<div class="container-list custom-container-list">
    <material-expansionpanel disabled
            [alwaysHideExpandIcon]="true"
            [expanded]="true"
            [showSaveCancel]="false">
        <div name>
            <span><strong>Measures</strong></span>
        </div>
        <div action>
            <material-button icon (trigger)="selectMeasure(null);detailVisible = true">
                <material-icon icon="add"></material-icon>
            </material-button>
        </div>
        <material-expansionpanel-set>
            <div class="measures-vertical-size" *deferredContent>
                <div  *ngFor="let iMeasure of measures; let i = index">
                    <material-expansionpanel disabled
                                             [expanded]="expandedControl[iMeasure] == true"
                                             [hideExpandedHeader]="false"
                                             [showSaveCancel]="expandedControl[iMeasure] == true"
                                             (cancel)="cancelCurrentValue(iMeasure, $event, i)"
                                             (save)="saveCurrentValue(iMeasure, $event)">
                        <div name class="truncate-ellipsed-parent custom-expansionpanel-panel-specific-name-width">
                            <span class="truncate-ellipsed">{{iMeasure.name}}</span>
                        </div>
                        <div value class="custom-slider">
                            <!--material-progress materialTooltip="{{progressLabel + ' ' + iMeasure.progress.toString() + '%'}}" [activeProgress]="iMeasure.progress"></material-progress-->
                            <!-- material-slider [(value)]="iMeasure.currentValueInt"  [min]="iMeasure.startValueInt" [max]="iMeasure.endValueInt" (valueChange)="updateMeasure($event)"></material-slider -->
                            <material-slider [disabled]="iMeasure.minValue == null && iMeasure.maxValue == null" [value]="iMeasure.valueRelatedMinMax" [step]="iMeasure.stepValue" [min]="iMeasure.minValue" [max]="iMeasure.maxValue" (valueChange)="changeCurrentValue(iMeasure, $event)" (click)="expandedControl[iMeasure] = true" materialTooltip="{{progressLabel + ' ' + iMeasure.progress.toString() + '%'}}"></material-slider>
                            <div class="width-flex">
                                <span materialTooltip="{{startValueLabel}}">{{iMeasure.startValue | number:'.' + iMeasure?.decimalsNumber?.toString()}}</span>
                                <span materialTooltip="{{currentValueLabel}}">{{iMeasure.currentValue | number:'.' + iMeasure?.decimalsNumber?.toString()}}</span>
                                <span materialTooltip="{{endValueLabel}}">{{iMeasure.endValue | number:'.' + iMeasure?.decimalsNumber?.toString()}}</span>
                            </div>
                            <material-input *ngIf="expandedControl[iMeasure] == true" floatingLabel multiline rows="3" [label]="'Comment'" [(ngModel)]="iMeasure.description" style="width: 100%;"></material-input>
                        </div>
                        <div action>
                            <div>
                                <material-menu [menu]="menuModel" (click)="selectMeasure(iMeasure)">
                                </material-menu>
                            </div>
                        </div>
                    </material-expansionpanel>
                </div>
            </div>
        </material-expansionpanel-set>
    </material-expansionpanel>
    <auge-measure-detail *ngIf="detailVisible == true" [objective]="objective" [selectedMeasure]="selectedMeasure" (save)="changeListItem($event)" (close)="detailVisible = false">
    </auge-measure-detail>
    <auge-measure-chart *ngIf="chartVisible == true" [selectedMeasure]="selectedMeasure" (close)="chartVisible = false">
    </auge-measure-chart>
</div>
