<div class="container-flex-row">
    <div *ngFor="let kanbanColumn of kanbanColumns">
        <div class="items-column" (drop)="drop($event, kanbanColumn)" (dragover)="allowDrop($event)">
            <header [style.background-color]="'hsl(' + kanbanColumn.stage.state.colorHue + ', ' + kanbanColumn.stage.state.colorSaturation + '%, ' + kanbanColumn.stage.state.colorLightness + '%)'">
               <h5><strong>{{kanbanColumn.stage.name}}</strong></h5>
            </header>
            <material-expansionpanel-set>
                <div *ngFor="let iColumnWorkItem of kanbanColumn.columnWorkItems">
                    <div draggable="true" (dragstart)="drag($event, kanbanColumn, iColumnWorkItem)" >
                        <material-expansionpanel disabled
                                                 [expanded]="false"
                                                 [hideExpandedHeader]="false"
                                                 [showSaveCancel]="false">
                            <div name class="custom-expansionpanel-panel-specific-name-width">
                                <span class="w3-col l12 truncate-ellipsed-parent">
                                    <span class="truncate-ellipsed">{{iColumnWorkItem.name}}</span>
                                </span>
                                <span class="w3-col l12 w3-right" *ngFor="let member of iColumnWorkItem.assignedTo">&nbsp;
                                    <span class="avatar" [style.background-image]="'url(' +  userUrlImage(member)  + ')'" [materialTooltip]="member.name"></span>
                                </span>
                            </div>
                            <div value>
                                <div class="w3-row-padding">
                                    <span class="w3-col l2">
                                        {{iColumnWorkItem.completed}}%
                                    </span>
                                    <span class="w3-col l10">
                                        <material-slider [(value)]="iColumnWorkItem.completed"
                                                         [min]="0"
                                                         [max]="100"
                                                         materialTooltip="{{completedLabel}}" (click)="updateWorkItem(iColumnWorkItem)">
                                        </material-slider>
                                    </span>
                                </div>
                                <div class="w3-row-padding">
                                    <span class="w3-col l12">
                                        <span materialTooltip="{{dueDateLabel}}" [style.color]="dueDateColor(iColumnWorkItem)">{{iColumnWorkItem.dueDate | date}}</span>
                                    </span>
                                </div>
                                <div class="w3-row w3-col l12">
                                    <material-expansionpanel *ngIf="iColumnWorkItem.checkItems.length > 0" name="{{checkItemsLabel}}" autoDismissable [showSaveCancel]="false" class="expansionpanel-flat-on-collapse-theme-no-border">
                                        <div *deferredContent>
                                            <div *ngFor="let iCheckItem of iColumnWorkItem.checkItems">
                                                <material-checkbox class="width-200" [(ngModel)]="iCheckItem.finished" [label]="iCheckItem.name" (click)="updateWorkItem(iColumnWorkItem)"></material-checkbox>
                                            </div>
                                        </div>
                                    </material-expansionpanel>
                                </div>
                            </div>
                            <div action>
                                <div>
                                    <material-menu [menu]="menuModel" (click)="selectWorkItem(iColumnWorkItem)">
                                    </material-menu>
                                </div>
                            </div>
                        </material-expansionpanel>
                    </div>
                </div>
            </material-expansionpanel-set>
        </div>
    </div>
</div>